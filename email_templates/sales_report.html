<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Sales Report</title>
</head>
<body style="background-color: #f3f4f6; padding: 20px; margin: 0; font-family: Arial, sans-serif;">

    <!-- Header Table -->
    <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="max-width: 800px; background-color: #0792d0; color: white; margin: 0 auto; font-family: Arial, sans-serif;">
        <tr>
            <td style="padding: 20px; font-size: 22px; font-weight: bold; text-align: left;">
                Weekly Sales Report - {{ report_date }}
            </td>
            <td align="right" style="padding: 20px;">
                <img src="{{logo_base64}}" alt="Company Logo" width="100" height="100" style="display: block;">
            </td>
        </tr>
    </table>

    <!-- Overview Stats -->
    <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="max-width: 800px; background-color: white; margin: 0 auto; font-family: Arial, sans-serif;">
        <tr>
            <td style="padding: 20px;">
                <h2 style="font-size: 20px; color: #333; margin: 0;">Sales Performance</h2>
            </td>
        </tr>
        <tr>
            <td style="padding: 0 20px 20px;">
                <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
                    <tr>
                        <td width="33%" align="center" style="padding: 16px; background-color: #f8fafc;">
                            <div style="font-size: 14px; color: #4a5568;">Total Revenue</div>
                            <div style="font-size: 24px; font-weight: bold; color: #2b6cb0;">${{ overview_stats.total_assigned }}</div>
                        </td>
                        <td width="33%" align="center" style="padding: 16px; background-color: #f8fafc;">
                            <div style="font-size: 14px; color: #4a5568;">Total Customers</div>
                            <div style="font-size: 24px; font-weight: bold; color: #2b6cb0;">{{ overview_stats.total_customers }}</div>
                        </td>
                        <td width="33%" align="center" style="padding: 16px; background-color: #f8fafc;">
                            <div style="font-size: 14px; color: #4a5568;">Avg per Customer</div>
                            <div style="font-size: 24px; font-weight: bold; color: #2b6cb0;">${{ overview_stats.avg_per_customer }}</div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>

    <!-- Budget Allocation Overview -->
    <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="max-width: 800px; background-color: white; margin: 20px auto; font-family: Arial, sans-serif;">
        <tr>
            <td style="padding: 20px;">
                <h2 style="font-size: 20px; color: #333; margin: 0;">Budget Allocation Overview</h2>
            </td>
        </tr>
        <tr>
            <td style="padding: 0 20px 20px;">
                <table role="presentation" width="100%" cellpadding="5" cellspacing="0" border="0" style="border-collapse: collapse; border: 1px solid #e2e8f0;">
                    <thead>
                        <tr style="background-color: #f8fafc;">
                            <th style="text-align: left; padding: 12px;">Quarter</th>
                            <th style="text-align: center; padding: 12px;">Progress</th>
                            <th style="text-align: right; padding: 12px;">Assigned</th>
                            <th style="text-align: right; padding: 12px;">Unassigned</th>
                            <th style="text-align: right; padding: 12px;">Total Budget</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for quarter in quarters %}
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">{{ quarter.name }}</td>
                            <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">
                                <table role="presentation" width="100%" height="24" cellspacing="0" cellpadding="0" border="0" style="border-radius: 4px; border: 1px solid #ccc;">
                                    <tr>
                                        <td width="{{ quarter.completion_percentage }}%" style="background-color: #3b82f6; text-align: center; font-size: 12px; color: white; font-weight: bold;">
                                            {{ quarter.completion_percentage }}%
                                        </td>
                                        <td width="{{ 100 - quarter.completion_percentage }}%" style="background-color: #e2e8f0;"></td>
                                    </tr>
                                </table>
                            </td>
                            <td style="text-align: right; padding: 12px;">${{ quarter.assigned }}</td>
                            <td style="text-align: right; padding: 12px;">${{ quarter.unassigned }}</td>
                            <td style="text-align: right; padding: 12px;">${{ quarter.budget }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
